@page "/Account/RegisterConfirmation"

@inject NavigationManager NavigationManager

<PageTitle>Confirmar correo</PageTitle>

<div class="auth-page">
    <div class="auth-card fade-in">
        <div class="auth-icon">📧</div>

        <h1 class="auth-title">Confirma tu correo</h1>
        <p class="auth-subtitle">
            Hemos enviado un enlace de confirmación a
            <span class="fw-semibold">@_email</span>.
        </p>

        <p class="small text-muted mb-4">
            Revisa tu bandeja de entrada y haz clic en el enlace para activar tu cuenta.
            Si no lo encuentras, revisa también la carpeta de correo no deseado.
        </p>

        <button type="button"
                class="btn btn-primary auth-submit w-100"
                @onclick="IrALogin">
            Ir a iniciar sesión
        </button>
    </div>

    <div class="auth-links fade-in-delayed">
        <span class="small">
            ¿Ya confirmaste tu cuenta?
            <a href="/Account/Login" class="link-light">Inicia sesión aquí</a>
        </span>
    </div>
</div>

@code {
    [SupplyParameterFromQuery]
    public string? Email { get; set; }

    [SupplyParameterFromQuery]
    public string? ReturnUrl { get; set; }

    private string _email = "";

    protected override void OnInitialized()
    {
        if (string.IsNullOrWhiteSpace(Email))
        {
            NavigationManager.NavigateTo("/");
            return;
        }

        _email = Email!;
    }

    private void IrALogin()
    {
        NavigationManager.NavigateTo("/Account/Login");
    }
}
